<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>

<script type="text/javascript">
   $(function(){
       // var m = parseInt(Math.random()*20+1);
       $("body").attr("class","bg0");
       var index=0;
       $(".prev").click(function () {
           index--;
           show();
           $("body").attr("class","bg"+(index+1)+'')
       });
       $(".next").click(function () {
           index++;
           show();
           $("body").attr("class","bg"+(index+1)+'')
       });
       $("#")
   console.log(index)
       $("body").attr("class","bg"+2+'');
       function show() {
           if(index>$(".img li").length-1){index=0}
           if(index<0){index=$(".img li").length-1}
           $(".img li").css("display","none");
           $(".img li").eq(index).css("display","block");
       }

       var succend = ['勇敢坚毅真正之才智乃刚毅之志向。 —— 拿破仑',
           '志向不过是记忆的奴隶，生气勃勃地降生，但却很难成长。 —— 莎士比亚',
           '骏马是跑出来的，强兵是打出来的。',
           '只有登上山顶，才能看到那边的风光。',
           '如果惧怕前面跌宕的山岩，生命就永远只能是死水一潭。',
           '平时没有跑发卫千米，占时就难以进行一百米的冲刺。',
           '梯子的梯阶从来不是用来搁脚的，它只是让人们的脚放上一段时间，以便让别一只脚能够再往上登。',
           '没有激流就称不上勇进，没有山峰则谈不上攀登。',
           '真正的才智是刚毅的志向。 —— 拿破仑',
           '山路曲折盘旋，但毕竟朝着顶峰延伸。',
           '只有创造，才是真正的享受，只有拚搏，才是充实的生活。',
           '敢于向黑暗宣战的人，心里必须充满光明。',
           '种子牢记着雨滴献身的叮嘱，增强了冒尖的勇气。',
           '自然界没有风风雨雨，大地就不会春华秋实。',
           '只会幻想而不行动的人，永远也体会不到收获果实时的喜悦。',
           '勤奋是你生命的密码，能译出你一部壮丽的史诗。',
           '对于攀登者来说，失掉往昔的足迹并不可惜，迷失了继续前时的方向却很危险。',
           '奋斗者在汗水汇集的江河里，将事业之舟驶到了理想的彼岸。',
           '忙于采集的蜜蜂，无暇在人前高谈阔论。',
           '勇士搏出惊涛骇流而不沉沦，懦夫在风平浪静也会溺水。'];
       var gameOver = ['志在峰巅的攀登者，不会陶醉在沿途的某个脚印之中。',
           '海浪为劈风斩浪的航船饯行，为随波逐流的轻舟送葬。',
           '人生最重要的一点是，永远不要迷失自己。',
           '一个人承受孤独的能力有多大，他的能力就有多大。',
           '实力塑造性格，性格决定命运。',
           '普通人成功并非靠天赋，而是靠把寻常的天资发挥到不寻常的高度。',
           '对于强者，要关注他们的灵魂，对于弱者，他关注他们的生存。',
           '积极的人在每一次忧患中都看到一个机会，而消极的人则在每个机会都看到某种忧患。',
           '成功不是将来才有的，而是从决定去做的那一刻起，持续累积而成。',
           '当你感到悲哀痛苦时，最好是去学些什么东西。学习会使你永远立于不败之地。',
           '有的人一生默默无闻，有的人一生轰轰烈烈，甚至千古流芳，为什么会这样？因为默默无闻的人只是满足于现状，而不去想怎么轰轰烈烈过一生，不要求自己，去做，去行动，怎么能够成功？',
           '人性最可怜的就是：我们总是梦想着天边的一座奇妙的玫瑰园，而不去欣赏今天就开在我们窗口的玫瑰。',
           '在人生的道路上，即使一切都失去了，只要一息尚存，你就没有丝毫理由绝望。因为失去的一切，又可能在新的层次上复得。',
           '没有一劳永逸的开始；也没有无法拯救的结束。人生中，你需要把握的是：该开始的，要义无反顾地开始；该结束的，就干净利落地结束。',
           '生命的奖赏远在旅途终点，而非起点附近。我不知道要走多少步才能达到目标，踏上第一千步的时候，仍然可能遭到失败。但我不会因此放弃，我会坚持不懈，直至成功！',
           '不要认为只要付出就一定会有回报，这是错误的。学会有效地工作，这是经营自己强项的重要课程。',
           '苦心人天不负，卧薪尝胆，三千越甲可吞吴。有志者事竞成，破釜沉舟，百二秦川终属楚。',
           '生命本身是一个过程，成功与失败只是人生过程中一些小小的片段，若果把生命与成功或失败联系在一起，生命将失去本身该有的意义。',
           '我们不要哀叹生活的不幸，诅咒命运的不公。在命运面前，我们要做强者，掐住命运的咽喉，叩问命运，改变命运。',
           '努力和效果之间，永远有这样一段距离。成功和失败的唯一区别是，你能不能坚持挺过这段无法估计的距离。'];
       var pillarNum =3;
       var stickMaxWidth= parseInt($(".container").offset().top);   //棍子最大的高度
       var stickMinWidth=65;   //棍子最小的高度
       //1,创建四个div，class为well的墙，记录墙之间的间隔
       var num = 0;
       var well = $("<div class='well'></div>");
       $(".well-box").append($(well));
       for(var i=0;i < pillarNum;i++) {
           //2，创建墙的时候要确定间隔的最大值和最小值，最小值是人的宽度，最大值是强到浏览器顶端的距离
           var interval = parseInt(Math.random() * (stickMaxWidth - stickMinWidth) + stickMinWidth);
           num = interval + num;
           well = $("<div class='well'></div>");
           $(well).css({"left": (((i+1) * 100 + num) + "px")});
           $(".well-box").append($(well));
       }
       //3，鼠标按下按钮,棍子的宽度增长，棍子在增长
       var n = 0;
       var j = 2;
       $(".btnClick").mousedown(function(){
           $(".stick").animate({"width":stickMaxWidth+"px"}, 1000)
       }).mouseup(function(){   //4，鼠标释放，给棍子绑定样式addClass，棍子倒下，获取棍子的宽度
           $(".stick").stop().addClass('stickDown');//停止动画，并且旋转棍子
           var gunZi = $(".stick").width();
           setTimeout(function () {
               //5，人开始跑，切换gif动态图片，设置图片的left值，与棍子的宽度一致
               $(".man img").attr("src","img/stick.gif");
               $(".man img").animate({left:gunZi+"px"},500,function () {
                   var leftOne = $(".well-box div:eq("+n+")").offset().left;
                   var leftTwo = $(".well-box div:eq("+(n+1)+")").offset().left;
                   var colWidth = $(".well-box div:eq("+n+")").width();
                   console.log("第二个："+leftTwo);
                   console.log("第一个："+leftOne);
                   console.log("柱子宽度"+colWidth);
                   var range = leftTwo - leftOne - colWidth;
                   //6，跑完之后，判断棍子的宽度和当前的间隔的大小，如果小于或大于宽度+墙的宽度就失败，否则成功
                   if ((gunZi < range) || (gunZi > leftTwo)){
                       $(".man").animate({bottom:"0px"},function () {
                           $(".man img").hide();
                           $(".stick").removeClass("stickDown").width(0); //复位棍子
                           var con = parseInt(Math.random()*20);
                           //alert("游戏结束！ "+gameOver[con]);
                           var conL = parseInt(Math.random()*20);
                           var al = $('<div class="dialog"><p>'+gameOver[conL]+'</p>' +
                               '<p class="dialog-btn"><a href="" class="play-agin">重新开始</a>' +
                               '<a href="javascript:void(0);" class="next">下一关</a>' +
                               '</p></div>');
                           $("body").append(al);
                       });
                   }else {
                       //7，成功后，强整体往左边移动，棍子位置和宽度还原，人的left根据动画变为0
                       $(".man img").attr("src","img/stick_stand.png");
                       $(".man img").animate({left:"0px"});
                       $(".stick").removeClass("stickDown").width(0);
                       var wellLeft = $(".well-box").offset().left;
                       $(".well-box").animate({"left":-leftTwo+wellLeft+"px"});
                       n++;
                       //($(".well-box").children().length-1)
                       //8，过完3个间隔，就判断过关
                       if (n == ($(".well-box").children().length-1)){
                           n=0;
                           pillarNum++;
                           var conL = parseInt(Math.random()*20);
                           var al = $('<div class="dialog"><p>'+succend[conL]+'</p>' +
                               '<p class="dialog-btn"><a href="" class="play-agin">重新开始</a>' +
                               '<a href="javascript:void(0);" class="next">下一关</a>' +
                               '</p></div>');
                           $("body").append(al);

                           $(".next").bind("click",function () {
                               $(".well-box").animate({"left": "0px"}, 100, function () {
                                   var g = parseInt(Math.random() * 20 + 1);
                                   $(".play-title").html("关卡" + j + '');
                                   $("body").attr("class", "bg" + g + '');
                                   j++;
                                   //9，过关后整体再重新执行一次
                                   num = 0;
                                   //清空原有的柱子，在重新生成
                                   $(".well-box").html("");
                                   $(well).css({"left": "0px"});
                                   $(".well-box").append($(well));
                                   for (var i = 0; i < pillarNum; i++) {
                                       //创建墙的时候要确定间隔的最大值和最小值，最小值是人的宽度，最大值是强到浏览器顶端的距离
                                       var interval = parseInt(Math.random() * (stickMaxWidth - stickMinWidth) + stickMinWidth);
                                       num = interval + num;
                                       well = $("<div class='well'></div>");
                                       $(well).css("left", ((i + 1) * 100 + num) + "px");
                                       $(".well-box").append($(well));
                                   }
                                   $(".dialog").css("display","none");
                               });
                           })
                       }
                   }
               })
           },600)
       })

   })
   window.onload = function () {
       // 时间
       var timer = null;
       function date() {
           var date = new Date();
           var oDate = document.getElementById("date");
           var oTime = document.getElementById("time");
           var year = date.getFullYear();
           var month = date.getMonth() + 1;
           var day = date.getDate();
           var week = date.getDay();
           var arr = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
           var dateStr = year + "年" + month + "月" + day + "日" + arr[week];
           var timeStr = date.getHours() + ":" + time(date.getMinutes()) + ":" + time(date.getSeconds());
           oDate.innerHTML = dateStr;
           oTime.innerHTML = timeStr;
       }
       date();
       setInterval(date, 1000);
       //添加功能：小于等于9时，前面加0
       function time(t){
           if(t<=9){
               return "0"+t
           }
           else {
               return t;
           }
       }
   }
</script>
</head>
<body class="bg2">
    <div class="set-text">
        <h2 class="play-title">关卡1</h2>
        <a href="index.html">主菜单</a>
    </div>
     <!--点击释放产生棍子的按钮-->
    <a href="javascript:void(0);" class="btnClick"></a>
    <div class="container">
        <!--棍子-->
        <div class="stick"></div>
        <!--人-->
        <div class="man"><img src="img/stick_stand.png"/></div>
        <!--墙-->
        <div class="well-box"></div>
    </div>
    <!--时间-->
    <div id="box">
        <p id="date">2018年2月14日 星期四</p>
        <p id="time">10:23:23</p>
    </div>
    <!--换肤-->
   <div class="img">
       <p id="change">换肤</p>
       <ul>
           <li> <img src="img/1.jpg" alt=""></li>
           <li> <img src="img/2.jpg" alt=""></li>
           <li> <img src="img/3.jpg" alt=""></li>
           <li> <img src="img/4.jpg" alt=""></li>
           <li> <img src="img/5.jpg" alt=""></li>
           <li> <img src="img/6.jpg" alt=""></li>
           <li> <img src="img/7.jpg" alt=""></li>
           <li> <img src="img/8.jpg" alt=""></li>
           <li> <img src="img/9.jpg" alt=""></li>
           <li> <img src="img/10.jpg" alt=""></li>
           <li> <img src="img/11.jpg" alt=""></li>
           <li> <img src="img/12.jpg" alt=""></li>
           <li> <img src="img/13.jpg" alt=""></li>
           <li>  <img src="img/14.jpg" alt=""></li>
           <li> <img src="img/15.jpg" alt=""></li>
           <li>  <img src="img/16.jpg" alt=""></li>
           <li> <img src="img/17.jpg" alt=""></li>
           <li> <img src="img/18.jpg" alt=""></li>
           <li> <img src="img/19.jpg" alt=""></li>
           <li> <img src="img/20.jpg" alt=""></li>
       </ul>
       <div class="control prev"><</div>
       <div class="control next">></div>
   </div>
</body>
</html>
